<html>
<head>
<title>Displaying tech talks via Ajax Search</title>
</head>

<body>

<h2>Google Tech Talks</h2>
<script
src="http://www.google.com/uds/api?file=uds.js&amp;v=1.0&amp;key=internal-codesite" type="text/javascript"></script>
<style type="text/css">
/* Inline style until homepage.css gets out of browser cache: Take out 3/20/2006 */
.videodateformat {
color: #666;
padding-top: 4px;
}
.duration {
color: #666;
}
.videosnippet {
clear: both;
padding-top: 4px;
}
</style>
<script language="Javascript" type="text/javascript">
function stripToAbstract(snippet) {
var index = snippet.indexOf('ABSTRACT');
return (index > 0) ? snippet.substring(index + 8) : snippet;
}
function OnLoad() {
var videoSearch = new GvideoSearch();
videoSearch.setResultOrder(GSearch.ORDER_BY_DATE);
videoSearch.setNoHtmlGeneration();
videoSearch.setSearchCompleteCallback(null, function() {
if (videoSearch.results.length == 0) { return; } // no need to keep going
var output = '';
var totalVideos = (videoSearch.results.length > 3) ? 3 : videoSearch.results.length;
for (var x=0; x < totalVideos; x++) {
var result = videoSearch.results[x];
var nicerDate = new Date();
nicerDate.setTime(Date.parse(result.published));
var dateFormatted = (nicerDate.getMonth()+1) + '/' + nicerDate.getDate() + '/' + nicerDate.getFullYear();
var snippet = stripToAbstract(result.content);
output += '<div class="featured"><div class="project"><div class="screenshot"><a href="' + result.url + '" rel="nofollow"><img src="' + result.tbUrl + '" alt="' + result.titleNoFormatting + ' Screenshot" width="129" height="110" /></a></div><div class="info"><div class="name"><a href="' + result.url + '" rel="nofollow">' + result.titleNoFormatting + '</a></div><div class="author videodateformat">Recorded on ' + dateFormatted + '</div><div class="duration">Duration: ' + parseInt(result.duration / 60) + ' mins</div></div><p class="videosnippet">' + snippet + '</p></div></div>';
}
document.getElementById('videosearch').innerHTML = output;
});
videoSearch.execute('user:"Google engEDU"');
}
GSearch.setOnLoadCallback(OnLoad);
</script>
<div id="videosearch"></div>
<div style="padding-bottom: 1em; margin-bottom: 5px;" align="right">
<a href="http://video.google.com/videosearch?q=user%3A%22Google+engEDU%22&amp;num=10&amp;so=1&amp;start=0">More tech talks &gt;&gt;</a>

</div>

</body>
</html>
